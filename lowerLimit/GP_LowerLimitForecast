# lowerLimit forecast expressed as timeSeries
?offer rdf:type ic-flex:FlexOffer . 
?offer ic-data:hasCreationTime ?ct .
?offer ic-flex:includes ?ts .
?ts rdf:type ic-data:TimeSeries .

# Definition of effective period
?offer ic-data:hasEffectivePeriod ?ep. 
?ep rdf:type time:Interval . 
?ep time:hasBeginning ?beg . 
?beg time:inXSDDataTimeStamp ?begts . 
?ep time:hasEnd ?end . 
?end  time:inXSDDataTimeStamp ?endts .

# Definition of creation time 
?ct rdf:type time:Instant .
?ct time:inXSDDataTimeStamp ?ctts .  

# Definition of update rate
?ts ic-data:hasUpdateRate ?ur
?ur rdf:type time:DurationDescription .
?ur time:hours ?res_h .
?ur time:days ?res_d
?ur time:minutes ?res_m  
?ur time:seconds ?res_s .

# Definition of temporal resolution
?ts ic-data:hasTemporalResolution ?tr
?tr rdf:type time:DurationDescription .
?tr time:hours ?res_h1 .
?tr time:days ?res_d1
?tr time:minutes ?res_m1  
?tr time:seconds ?res_s1 .

# Definition of topological location of an asset
?ts ic-tplg:hasToplogicalAssociation ?tplg_loc .
?tplg_loc rdf:type ic-tplg:TopologicalLocation .
?tplg_loc ic-tplg:isToplogicalAssociationOf ?asset .
?asset rdf:type saref:Device .
?asset ic-tplg:hasTopologicalAssociation ?tplg_loc.

# Definition of the timeseries included in the flex offer  
?ts ic-data:producedBy ?organization .
?ts ic-data:hasUsage ic-data:lowerLimit .
?ts ic-data:hasDatapoint ?dp .

# Definition of datapoints for active power values in the timeseries 
?dp ic-data:hasEffectivePeriod ?ep .
?dp ic-data:hasUpdateRate ?ur .
?dp ic-tplg:hasToplogicalAssociation ?tplg_loc .
# not neeed actually
?dp ic-data:hasUsage ?use .
?dp ic-data:producedBy ?organization .
?dp ic-data:containsQuantity ?qap  .
?qap  rdf:type ic-uom:ActivePower .
?qap om:hasValue ?qapv .
?qapv om:hasUnit om:kiloWatt .
?qapv om:hasNumericalValue ?qapnv .